	LIST P=16F877A
	#INCLUDE <P16F877A.INC>
	COUNTER EQU 0X20
	VAR1 EQU 0X21
	VAR2 EQU 0X22
	ORG 0X00
	GOTO INIT
	
INIT
	BSF STATUS,5
	MOVLW H'06'
	MOVWF ADCON1
	MOVLW B'11111111'
	MOVWF TRISA
	CLRF TRISB
	BCF STATUS,5
	CLRF PORTB 
	CLRF COUNTER
	
	
MAIN 
	BTFSC PORTA,0
	GOTO INCREASE
	BTFSC PORTA,1
	GOTO DECREASE
	GOTO MAIN

INCREASE
    	CALL DELAY
	CALL DELAY
	INCF COUNTER
	CALL CONTROL_INC
	MOVF COUNTER,W
	MOVWF PORTB 
	GOTO ON
	GOTO MAIN
	
DECREASE
	CALL DELAY
	CALL DELAY
	DECF COUNTER
	CALL CONTROL_DEC
	GOTO ON
	GOTO MAIN
	
CONTROL_DEC
	MOVLW D'255'
	SUBWF COUNTER,W
	BTFSS STATUS,Z
	RETURN
	MOVLW D'9'
	MOVWF COUNTER
	RETURN
CONTROL_INC
	MOVLW D'10'
	SUBWF COUNTER,W
	BTFSS STATUS,C
	RETURN
	CLRF COUNTER
	RETURN
	
ON 
	MOVF COUNTER,W
	MOVWF PORTB
	GOTO MAIN
	
DELAY
    MOVLW D'255'
    MOVWF VAR1
    
DELAY2
    MOVLW D'255'
    MOVWF VAR2
    
DELAY3
    DECFSZ VAR2,F
    GOTO DELAY3
    DECFSZ VAR1,F
    GOTO DELAY2
    RETURN

END
	
    