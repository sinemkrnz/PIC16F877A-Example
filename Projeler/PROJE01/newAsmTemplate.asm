    LIST P=16F877A
    #INCLUDE <P16F877A.INC>
    __CONFIG	H'3F3A'
    IN_OUT EQU 0X20
    COUNTERA EQU 0X21
    COUNTERB EQU 0X22
    VAR1 EQU 0X23
    VAR2 EQU 0X24
    ORG 0X00
    GOTO INIT
INIT
    BCF STATUS,6
    BSF STATUS,5
    MOVLW H'06'
    MOVWF ADCON1
    MOVLW B'00110000'
    MOVWF TRISA
    CLRF TRISB
    BCF STATUS,5
    CLRF PORTA
    CLRF PORTB
    CLRF IN_OUT
    CLRF COUNTERA
    CLRF COUNTERB
    BSF IN_OUT,0
    
MAIN
    BTFSS PORTA,4
    GOTO BUTTON_5
    BSF IN_OUT,0
    GOTO ROUTER
BUTTON_5
    BTFSS PORTA,5
    GOTO ROUTER
    BCF	IN_OUT,0
    GOTO ROUTER
    
ROUTER
    BTFSC IN_OUT,0
    GOTO COUNT_UP
    GOTO COUNT_DOWN
    
COUNT_DOWN
    CALL ON_LED
    DECFSZ COUNTERB
    GOTO MAIN
    CALL ON_LED
    DECFSZ COUNTERA
    MOVLW D'15'
    SUBWF COUNTERA,W
    BTFSS STATUS,C
    GOTO MAIN
    MOVLW D'15'
    MOVWF COUNTERA
    GOTO MAIN


COUNT_UP
    CALL ON_LED
    INCFSZ COUNTERB
    GOTO MAIN
    INCFSZ COUNTERA
    MOVLW D'16'
    SUBWF COUNTERA,W
    BTFSS STATUS,C
    GOTO MAIN
    CLRF COUNTERA
    GOTO MAIN
    
ON_LED
   CALL DELAY
   MOVF COUNTERA,W
   MOVWF PORTA
   MOVF COUNTERB,W
   MOVWF PORTB
   RETURN
DELAY
    MOVLW D'255'
    MOVWF VAR1
    
DELAY2
    MOVLW D'255'
    MOVWF VAR2
    
DELAY3
    DECFSZ VAR2,F
    GOTO DELAY3
    DECFSZ VAR1,F
    GOTO DELAY2
    RETURN
END    





