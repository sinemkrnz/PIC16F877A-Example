    LIST P=16F877A
    #INCLUDE <P16F877A.INC>
    
    CNT EQU 0X21
    VAR1 EQU 0X22
    VAR2 EQU 0X23
    ORG 0X00
    GOTO INIT

INIT
    BSF STATUS,5
    MOVLW H'06'
    MOVWF ADCON1
    BSF TRISA,0
    MOVLW B'00000000'
    MOVWF TRISB
    BCF STATUS,5
    MOVLW B'00001010'
    MOVWF CNT
    
MAIN
    BTFSC PORTA,0
    GOTO DECREASE
    GOTO MAIN
    
DECREASE
    DECFSZ CNT,F
    GOTO ON
    GOTO RST

RST
    MOVLW B'00001010'
    MOVWF CNT
    CLRF PORTB
    GOTO MAIN
    
ON
    CALL DELAY
    MOVF CNT,W
    MOVWF PORTB
    GOTO MAIN
    
DELAY
    MOVLW D'255'
    MOVWF VAR1
    
DELAY2
    MOVLW D'255'
    MOVWF VAR2
    
DELAY3
    DECFSZ VAR2,F
    GOTO DELAY3
    DECFSZ VAR1,F
    GOTO DELAY2
    RETURN
    
END
